window.FaviconOverlay=class{constructor(t){this.colorStart=t.colorStart||"pink",this.colorPause=t.colorPause||"yellow",this.defaultFavicon=t.defaultFavicon||"",this.favicon=this.getFaviconElement(),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.isActive=!1,this.setDefaultFavicon()}getFaviconElement(){let t=document.querySelector('link[rel="icon"], link[rel="shortcut icon"]');if(t){var e=t.getAttribute("href");if(e&&(e.startsWith("data:image")||e.startsWith("http")))return t;t.href=this.defaultFavicon}else(t=document.createElement("link")).rel="icon",t.href=this.defaultFavicon,document.head.appendChild(t);return t}setDefaultFavicon(){if(!this.defaultFavicon){let e="/favicon.ico";fetch(e).then(t=>{window.console.log("response",t),t.ok?this.defaultFavicon=e:this.defaultFavicon=this.createDefaultFavicon()}).catch(t=>{})}}createDefaultFavicon(){var t=document.createElement("canvas"),e=t.getContext("2d");return t.width=32,t.height=32,e.fillStyle="rgba(0, 0, 0, 0)",e.fillRect(0,0,32,32),t.toDataURL("image/png")}createFaviconWithOverlay(a="start"){let i=new Image;i.src=this.defaultFavicon,i.onload=()=>{this.canvas.width=i.width,this.canvas.height=i.height,this.ctx.drawImage(i,0,0);var t=i.width/4,e="start"===a?this.colorStart:this.colorPause,t=(this.ctx.beginPath(),this.ctx.arc(i.width-t,t,t,0,2*Math.PI),this.ctx.fillStyle=e,this.ctx.fill(),this.canvas.toDataURL("image/png"));this.favicon.href=t,(new Image).src=t}}activate(t="start"){this.isActive=!0,this.createFaviconWithOverlay(t)}deactivate(){this.isActive&&(this.isActive=!1,this.favicon.href=this.defaultFavicon)}};let faviconoverlay=new FaviconOverlay({});window.addEventListener("load",function(){setTimeout(()=>{function e(t){t.classList.contains("timeman-start")||t.classList.contains("timeman-completed")?faviconoverlay.deactivate():t.classList.contains("timeman-paused")?faviconoverlay.activate("pause"):faviconoverlay.activate()}let a=document.querySelector(".timeman-block");a&&(e(a),new MutationObserver(function(t){t.forEach(function(t){"attributes"===t.type&&"class"===t.attributeName&&e(a)})}).observe(a,{attributes:!0}))},100)});